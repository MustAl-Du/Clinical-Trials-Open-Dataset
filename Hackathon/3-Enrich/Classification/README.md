# Generator (Making your NLP Model)

## How to use:
- install python 3
- pip any required packages
- run with an input file with a csv format of `entity,category` (and no category header)
- install azcopy
- run the upload command

### Usage Example
- run `.\generate_input.py -storageContainer "condition-data" -projectName "ConditionProject" -inputFile conditions_raw.txt`
- make sure you have an existing storage container named according to your args
- login to azcopy (in elevated powershell) with `azcopy login`
- run `azcopy copy 'C:\repos\Clinical-Trials-Open-Dataset\Hackathon\3-Enrich\Classification\ConditionProject_train\*' 'https://kdhhackathonstorage.blob.core.windows.net/condition-data'`
- upload the autogenerated format json to Azure Cognitive Services at `https://language.cognitive.azure.com/customText/projects/extraction`

The files used in the example above can be found in this directory.

### Gotchas
- project name formatting is restrictive. Stick to alphanumeric values without spaces if you're encountering issues
- entity categories are limited to 50 characters in length. You may need to rename some categories
  - ex: `Surgery, Abdominal Disease, Emergency and Intensive Care` -> `Surgery, Abdominal Disease, Emergency and ICU`
- multilanguage support is not implemented by this script

# Classifier (Using your NLP Model)

## How to use:
- install python 3
- pip any required packages
- create and configure a `keys.txt` file following the format of `keys_format.txt` with your values used for the generator
- run `.\classify_entities_async.py` with your input file in the same directory
- find your csv with new NLP generated columns at `enriched.csv`


### Gotchas
- untested on large files - may time out
  - possible solution: use a continuation token